{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='high3_result.css') }}">
{% endblock %}

{% block content %}

<div class="h3-wrap">

  <h1 class="h3-title">ê³ 3 / Nìˆ˜ ì…ì‹œ ë¶„ì„ ê²°ê³¼</h1>

  <!-- =====================
       ì…ë ¥ ì„±ì  ìš”ì•½
       ===================== -->
  <section class="card">
    <h2 class="card-title">ğŸ“Š ì…ë ¥ ì„±ì  ìš”ì•½ (ë¶„ì„ ê¸°ì¤€)</h2>

    <div class="summary-grid">
      <!-- ìˆ˜ì‹œ -->
      <div>
        <span class="label">ìˆ˜ì‹œ(ë‚´ì‹ )</span>
        <span class="value">{{ result.susi.naesin_avg }} ë“±ê¸‰</span>
      </div>

      <!-- ì •ì‹œ -->
      <div>
        <span class="label">ì •ì‹œ ì„±ì </span>

        <div class="score-blocks">
          {% set subject_order = [
            ('kor', 'êµ­ì–´'),
            ('math', 'ìˆ˜í•™'),
            ('eng', 'ì˜ì–´'),
            ('inq1', 'íƒêµ¬1'),
            ('inq2', 'íƒêµ¬2')
          ] %}

          {% for key, label in subject_order %}
            {% if key in result.jungsi.scores_keep %}
              <div class="score-chip {% if key == 'eng' %}eng{% endif %}">
                <span class="subject">{{ label }}</span>
                <span class="score">{{ result.jungsi.scores_keep[key] }}</span>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  </section>

  <!-- =====================
       ìˆ˜ì‹œ ë¶„ì„
       ===================== -->
  <section class="card">
    <h2 class="card-title">ğŸ“ ìˆ˜ì‹œ ë¶„ì„</h2>

    <p class="desc">
      ì˜ˆìƒ ë‚´ì‹  í‰ê·  (í˜„ì‹¤ì  ë“±ê¸‰ ë³€í™” ê¸°ì¤€):
      <strong>{{ result.susi.expected_avg }}</strong>
    </p>

    <h3 class="sub-title">ìˆ˜ì‹œ ê°€ëŠ¥ ëŒ€í•™ (ë³´ìˆ˜ì )</h3>

    {% if result.susi.possible_list %}
      <div class="uni-list">
        {% for u in result.susi.possible_list %}
        <div class="uni-row">
          <span class="uni-name">{{ u.university }} {{ u.major }}</span>
          <span class="cut">50%ì»· {{ u.cut50 }}</span>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="empty">ë³´ìˆ˜ì  ê¸°ì¤€ìœ¼ë¡œ ê°€ëŠ¥í•œ ëŒ€í•™ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  </section>

  <!-- =====================
       ì •ì‹œ ë¶„ì„
       ===================== -->
  <section class="card">
    <h2 class="card-title">ğŸ§® ì •ì‹œ ë¶„ì„ (í˜„ ì„±ì  ê¸°ì¤€)</h2>

    {% if result.jungsi.possible_list %}
      <div class="uni-list">
        {% for u in result.jungsi.possible_list %}
        <div class="uni-row">
          <span class="uni-name">{{ u.university }} {{ u.major }}</span>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="empty">í˜„ì¬ ì •ì‹œ ì„±ì ìœ¼ë¡œ ì§€ì› ê°€ëŠ¥í•œ ëŒ€í•™ì´ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  </section>

  <!-- =====================
       ì „í˜• ì¶”ì²œ
       ===================== -->
  <section class="card highlight">
    <h2 class="card-title">âœ¨ ì „í˜• ì¶”ì²œ ê²°ê³¼</h2>

    <p class="pick">
      ğŸ‘‰ <strong>{{ result.recommendation.pick }}</strong> ì „í˜•ì´ ë” ìœ ë¦¬í•©ë‹ˆë‹¤.
    </p>

    <ul class="reason-list">
      {% for r in result.recommendation.reasons %}
        <li>{{ r }}</li>
      {% endfor %}
    </ul>
  </section>

  <!-- =====================
       ê³ 3 ì„¸íŠ¹ ë°©í–¥
       ===================== -->
  <section class="card dashed">
    <h2 class="card-title">ğŸ“Œ ê³ 3 ì„¸íŠ¹ Â· í™œë™ ë°©í–¥ì„±</h2>
    <ul class="check-list">
      <li>ê¸°ì¡´ ì„¸íŠ¹ ì£¼ì œ ì¼ê´€ì„± ìœ ì§€ (í™•ì¥ë³´ë‹¤ ì •ì œ)</li>
      <li>ì „ê³µ ê´€ë ¨ ë…ì„œ 1~2ê¶Œ ì§‘ì¤‘ ì •ë¦¬</li>
      <li>ë³´ê³ ì„œÂ·íƒêµ¬ í™œë™ì€ â€œì™„ì„±ë„â€ ìœ„ì£¼ë¡œ ì •ë¦¬</li>
    </ul>
  </section>

</div>

<!-- =====================
     í•˜ë‹¨ CTA
     ===================== -->
<form action="{{ url_for('n_result.n_result') }}" method="POST" class="cta-bar">

  <input type="hidden" name="kor_grade" value="{{ forRetry.kor_val }}">
  <input type="hidden" name="math_grade" value="{{ forRetry.math_val }}">
  <input type="hidden" name="eng_grade" value="{{ forRetry.eng_val }}">
  <input type="hidden" name="inq1_grade" value="{{ forRetry.inq1_val }}">
  <input type="hidden" name="inq2_grade" value="{{ forRetry.inq2_val }}">
  <input type="hidden" name="inq1_percent" value="{{ forRetry.inq1_val_percent }}">
  <input type="hidden" name="inq2_percent" value="{{ forRetry.inq2_val_percent }}">

  <button type="submit" class="cta-btn">
    í˜¹ì‹œ Nìˆ˜ ìƒê°ì´ ìˆë‹¤ë©´? ğŸ‘‰ Nìˆ˜ ì „ëµ ë³´ê¸°
  </button>
</form>

{% endblock %}
